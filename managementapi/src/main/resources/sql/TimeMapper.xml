<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.lhy.management.time.mapper.TimeMapper" >

    <insert id="saveNewTime" parameterType="com.lhy.management.time.model.TimeInfoModel">
        insert into t_mng_time
        (
        week_name,
        start_time,
        end_time,
        remark,
        status
        )
        value
        (
        #{weekName},
        #{startTime},
        #{endTime},
        #{remark},
        #{status}
        )
        <selectKey keyProperty="id" resultType="Long">
            <![CDATA[
              SELECT LAST_INSERT_ID();
            ]]>
        </selectKey>
    </insert>

    <select id="getTimeList" parameterType="com.lhy.management.time.model.TimeInfoModel" resultType="com.lhy.management.time.model.TimeInfoModel">
        select
        id as id,
        week_name as weekName,
        start_time as startTime,
        end_time as endTime,
        remark as remark,
        status as status
        from
        t_mng_time
        where
        1 = 1
        <if test="startTime != null">
            and start_time >= #{startTime}
        </if>
        <if test="endTime != null">
            and #{endTime} >= end_time
        </if>
    </select>
</mapper>
